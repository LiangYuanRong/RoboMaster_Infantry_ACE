#include "main.h"
#include "PID_Def.h"
#include "Mode_Def.h"

/*
* 功能：系统初始化
*/
void System_Init(void)
{
/***********************************通用初始化部分*****************************************/
	
	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_4);//设置系统中断优先级分组 4
	delay_init(180);     	                         //延时函数初始化
 
	/*A板蜂鸣器*/
	BEEP_Init();    //影流之主测试
	
	/*can通信初始化*/
	CAN1_Configuration(CAN_SJW_1tq, CAN_BS1_8tq, CAN_BS2_6tq, 3, CAN_Mode_Normal);         //can1初始化
  CAN2_Configuration(CAN_SJW_1tq, CAN_BS1_8tq, CAN_BS2_6tq, 3, CAN_Mode_Normal);         //can2板间通信初始化
	
	/*板载陀螺仪初始化*/
//	SPI5_Init();                  //接口初始化
//	SPI5_SetSpeed(SPI_BaudRatePrescaler_128);
//	MPU6500_Init();               //陀螺仪初始化
//	TIM2_Init();                  //TIM定时器
//	CalOffset_Gyro();             //校准陀螺仪

	/*PID参数初始化*/
	Parameter_Init();
	
	/*灯光初始化*/ 
	LED_Init();                   //板载LED初始化
  Laser_Init();                 //激光初始化
	
/***********************************底盘板初始化部分******************************************/

#ifdef 	board_chassis
	/*遥控初始化*/
	RC_Init();          	        //遥控初始化（串口一）
	delay_ms(100);      		     	//等待上电平稳  
  
  /*弹仓舵机参数初始化*/
  TIM3_PWM_Init(200-1,8400-1);                        //Pitch轴电机PWM初始化
	TIM3->CCR3=5;///18//5
	TIM6_Configuration();                         //设一个定时器
	
	/*功率限制*/
	Power_Init();     //功率相关参数   
#endif
	  

/***********************************云台板初始化部分*******************************************/

#ifdef board_gimbal	
	
	/*视觉对接代码初始化(串口三)*/
	Automatic_Strike_Init();
	
  /*裁判系统初始化*/
	Referee_Init();   //串口6 dma2
	
  /*发射摩擦轮初始化*/
	TIM5_PWM_Init(21111-1,90-1);                //摩擦轮初始化 & 副云台pwm初始化	
	PWM_Shoot_Left = PWM_Shoot_Right = 1000;		//上电摩擦轮停止
	TIM5->CCR3 = 0;
	TIM5->CCR3 = 0;
	
	/*外接陀螺仪初始化*/
	BMI160_USART2_Configuration();   //串口二初始化
	
	/*光电初始化*/
	Yaw_Zero_GPIO_Init();         //Y轴中值光电初始化

	
	/*副云台相关初始化*/
  #ifdef double_gimbal
	Double_GPIO_Init(); 
	BMI160_USART6_Configuration();
	TIM4_Init(200-1,8400-1);
  #endif
	
  /*看门狗初始化*/
  #ifdef watch_dog
   IWDG_Init();
	#endif

#endif
	
	
/***********************************初始化完成状态确认*******************************************/
  RED_OFF; 
  GREEN_ON;	
  Laser_ON();
//	for(int i=0;i<Startup_Success_music_len;i++)
//	 {
//		 Sing_Startup_music(i);
//		 delay_ms(100);
//	 }

//			for(int i=0;i<Ying_liu_zhi_zhu_music_len;i++)//影流之主
//		 {
//			 Sing_Ying_liu_zhi_zhu(i);
//			 delay_ms(400);
//		 }			 
}



/*
* 功能：PID参数初始化
* 备注：结构体定义在rmmotor文件
*/
void Parameter_Init(void)
{
	/*************底盘电机位置环**************/
	CHASSIS_1_P_PID.kp=CHASSIS_P_1_P;
	CHASSIS_1_P_PID.ki=CHASSIS_P_1_I;
	CHASSIS_1_P_PID.kd=CHASSIS_P_1_D;
	CHASSIS_1_P_PID.Error=0;
	CHASSIS_1_P_PID.iError=0;
	CHASSIS_1_P_PID.LastError=0;
	CHASSIS_1_P_PID.outputValue_Int32=0;
	CHASSIS_1_P_PID.PrevError=0;
	CHASSIS_1_P_PID.SetValue=0;
	
	CHASSIS_2_P_PID.kp=CHASSIS_P_2_P;
	CHASSIS_2_P_PID.ki=CHASSIS_P_2_I;
	CHASSIS_2_P_PID.kd=CHASSIS_P_2_D;
	CHASSIS_2_P_PID.Error=0;
	CHASSIS_2_P_PID.iError=0;
	CHASSIS_2_P_PID.LastError=0;
	CHASSIS_2_P_PID.outputValue_Int32=0;
	CHASSIS_2_P_PID.PrevError=0;
	CHASSIS_2_P_PID.SetValue=0;
	
	CHASSIS_3_P_PID.kp=CHASSIS_P_3_P;
	CHASSIS_3_P_PID.ki=CHASSIS_P_3_I;
	CHASSIS_3_P_PID.kd=CHASSIS_P_3_D;
	CHASSIS_3_P_PID.Error=0;
	CHASSIS_3_P_PID.iError=0;
	CHASSIS_3_P_PID.LastError=0;
	CHASSIS_3_P_PID.outputValue_Int32=0;
	CHASSIS_3_P_PID.PrevError=0;
	CHASSIS_3_P_PID.SetValue=0;
	
	CHASSIS_4_P_PID.kp=CHASSIS_P_4_P;
	CHASSIS_4_P_PID.ki=CHASSIS_P_4_I;
	CHASSIS_4_P_PID.kd=CHASSIS_P_4_D;
	CHASSIS_4_P_PID.Error=0;
	CHASSIS_4_P_PID.iError=0;
	CHASSIS_4_P_PID.LastError=0;
	CHASSIS_4_P_PID.outputValue_Int32=0;
	CHASSIS_4_P_PID.PrevError=0;
	CHASSIS_4_P_PID.SetValue=0;
	
	/*************底盘电机速度环**************/
	CHASSIS_1_S_PID.kp=CHASSIS_S_1_P;
	CHASSIS_1_S_PID.ki=CHASSIS_S_1_I;
	CHASSIS_1_S_PID.kd=CHASSIS_S_1_D;
	CHASSIS_1_S_PID.Error=0;
	CHASSIS_1_S_PID.iError=0;
	CHASSIS_1_S_PID.LastError=0;
	CHASSIS_1_S_PID.outputValue_Int32=0;
	CHASSIS_1_S_PID.PrevError=0;
	CHASSIS_1_S_PID.SetValue=0;
	
	CHASSIS_2_S_PID.kp=CHASSIS_S_2_P;
	CHASSIS_2_S_PID.ki=CHASSIS_S_2_I;
	CHASSIS_2_S_PID.kd=CHASSIS_S_2_D;
	CHASSIS_2_S_PID.Error=0;
	CHASSIS_2_S_PID.iError=0;
	CHASSIS_2_S_PID.LastError=0;
	CHASSIS_2_S_PID.outputValue_Int32=0;
	CHASSIS_2_S_PID.PrevError=0;
	CHASSIS_2_S_PID.SetValue=0;
	
	CHASSIS_3_S_PID.kp=CHASSIS_S_3_P;
	CHASSIS_3_S_PID.ki=CHASSIS_S_3_I;
	CHASSIS_3_S_PID.kd=CHASSIS_S_3_D;
	CHASSIS_3_S_PID.Error=0;
	CHASSIS_3_S_PID.iError=0;
	CHASSIS_3_S_PID.LastError=0;
	CHASSIS_3_S_PID.outputValue_Int32=0;
	CHASSIS_3_S_PID.PrevError=0;
	CHASSIS_3_S_PID.SetValue=0;
	
	CHASSIS_4_S_PID.kp=CHASSIS_S_4_P;
	CHASSIS_4_S_PID.ki=CHASSIS_S_4_I;
	CHASSIS_4_S_PID.kd=CHASSIS_S_4_D;
	CHASSIS_4_S_PID.Error=0;
	CHASSIS_4_S_PID.iError=0;
	CHASSIS_4_S_PID.LastError=0;
	CHASSIS_4_S_PID.outputValue_Int32=0;
	CHASSIS_4_S_PID.PrevError=0;
	CHASSIS_4_S_PID.SetValue=0;
	
	CHASSIS_MOVE_FOLLOW_PID.kp=CHASSIS_MOVE_FOLLOW_P;
	CHASSIS_MOVE_FOLLOW_PID.ki=CHASSIS_MOVE_FOLLOW_I;
	CHASSIS_MOVE_FOLLOW_PID.kd=CHASSIS_MOVE_FOLLOW_D;
	CHASSIS_MOVE_FOLLOW_PID.Error=0;
	CHASSIS_MOVE_FOLLOW_PID.iError=0;
	CHASSIS_MOVE_FOLLOW_PID.LastError=0;
	CHASSIS_MOVE_FOLLOW_PID.PrevError=0;
	CHASSIS_MOVE_FOLLOW_PID.OutputValue=0;
	CHASSIS_MOVE_FOLLOW_PID.outputValue_Int32=0;
	CHASSIS_MOVE_FOLLOW_PID.LastOutput=0;
	CHASSIS_MOVE_FOLLOW_PID.SetValue=0;

	CHASSIS_ROTATE_FOLLOW_PID.kp=CHASSIS_ROTATE_FOLLOW_P;
	CHASSIS_ROTATE_FOLLOW_PID.ki=CHASSIS_ROTATE_FOLLOW_I;
	CHASSIS_ROTATE_FOLLOW_PID.kd=CHASSIS_ROTATE_FOLLOW_D;
	CHASSIS_ROTATE_FOLLOW_PID.Error=0;
	CHASSIS_ROTATE_FOLLOW_PID.iError=0;
	CHASSIS_ROTATE_FOLLOW_PID.LastError=0;
	CHASSIS_ROTATE_FOLLOW_PID.PrevError=0;
	CHASSIS_ROTATE_FOLLOW_PID.OutputValue=0;
	CHASSIS_ROTATE_FOLLOW_PID.outputValue_Int32=0;
	CHASSIS_ROTATE_FOLLOW_PID.LastOutput=0;
	CHASSIS_ROTATE_FOLLOW_PID.SetValue=0;
	
	/*******供弹电机速度环初始化*******/
	FIRE_S_PID.kp=FIRE_S_P;
	FIRE_S_PID.ki=FIRE_S_I;
	FIRE_S_PID.kd=FIRE_S_D;
	FIRE_S_PID.Error=0;
	FIRE_S_PID.iError=0;	
	FIRE_S_PID.LastError=0;
	FIRE_S_PID.outputValue_Int32=0;
	FIRE_S_PID.PrevError=0;
	FIRE_S_PID.SetValue=0;
	
	/***********云台PY参数初始化*************/
	//Pitch
	GIMBAL_P_PITCH_PID.kp=GIMBAL_P_PITCH_P; 
	GIMBAL_P_PITCH_PID.ki=GIMBAL_P_PITCH_I;
	GIMBAL_P_PITCH_PID.kd=GIMBAL_P_PITCH_D;
	GIMBAL_P_PITCH_PID.Error=0;
	GIMBAL_P_PITCH_PID.iError=0;
	GIMBAL_P_PITCH_PID.LastError=0;
	GIMBAL_P_PITCH_PID.OutputValue=0;
	GIMBAL_P_PITCH_PID.outputValue_Int32=0;
	GIMBAL_P_PITCH_PID.LastOutput=0;
	GIMBAL_P_PITCH_PID.SetValue=0;
	
	GIMBAL_S_PITCH_PID.kp=GIMBAL_S_PITCH_P;
	GIMBAL_S_PITCH_PID.ki=GIMBAL_S_PITCH_I;
	GIMBAL_S_PITCH_PID.kd=GIMBAL_S_PITCH_D;
	GIMBAL_S_PITCH_PID.Error=0;
	GIMBAL_S_PITCH_PID.iError=0;	
	GIMBAL_S_PITCH_PID.LastError=0;
	GIMBAL_S_PITCH_PID.PrevError=0;
	GIMBAL_S_PITCH_PID.OutputValue=0;
	GIMBAL_S_PITCH_PID.outputValue_Int32=0;
	GIMBAL_S_PITCH_PID.LastOutput=0;
	GIMBAL_S_PITCH_PID.SetValue=0;
	
	//Yaw
	GIMBAL_P_YAW_PID.kp=GIMBAL_P_YAW_P;
	GIMBAL_P_YAW_PID.ki=GIMBAL_P_YAW_I;
	GIMBAL_P_YAW_PID.kd=GIMBAL_P_YAW_D;
	GIMBAL_P_YAW_PID.Error=0;
	GIMBAL_P_YAW_PID.iError=0;	
	GIMBAL_P_YAW_PID.LastError=0; 
	GIMBAL_P_YAW_PID.OutputValue=0;
	GIMBAL_P_YAW_PID.outputValue_Int32=0;
	GIMBAL_P_YAW_PID.LastOutput=0;
	GIMBAL_P_YAW_PID.SetValue=0;
	
	GIMBAL_S_YAW_PID.kp=GIMBAL_S_YAW_P;
	GIMBAL_S_YAW_PID.ki=GIMBAL_S_YAW_I;
	GIMBAL_S_YAW_PID.kd=GIMBAL_S_YAW_D;
	GIMBAL_S_YAW_PID.Error=0;
	GIMBAL_S_YAW_PID.iError=0;
	GIMBAL_S_YAW_PID.LastError=0;
	GIMBAL_S_YAW_PID.PrevError=0;
	GIMBAL_S_YAW_PID.OutputValue=0;
	GIMBAL_S_YAW_PID.outputValue_Int32=0;
	GIMBAL_S_YAW_PID.LastOutput=0;
	GIMBAL_S_YAW_PID.SetValue=0;

	//Second Pitch
	GIMBAL_DOUBLE_P_PITCH_PID.kp=GIMBAL_DOUBLE_P_PITCH_P; 
	GIMBAL_DOUBLE_P_PITCH_PID.ki=GIMBAL_DOUBLE_P_PITCH_I;
	GIMBAL_DOUBLE_P_PITCH_PID.kd=GIMBAL_DOUBLE_P_PITCH_D;
	GIMBAL_DOUBLE_P_PITCH_PID.Error=0;
	GIMBAL_DOUBLE_P_PITCH_PID.iError=0;
	GIMBAL_DOUBLE_P_PITCH_PID.LastError=0;
	GIMBAL_DOUBLE_P_PITCH_PID.OutputValue=0;
	GIMBAL_DOUBLE_P_PITCH_PID.outputValue_Int32=0;
	GIMBAL_DOUBLE_P_PITCH_PID.LastOutput=0;
	GIMBAL_DOUBLE_P_PITCH_PID.SetValue=0;
	
	GIMBAL_DOUBLE_S_PITCH_PID.kp=GIMBAL_DOUBLE_S_PITCH_P;
	GIMBAL_DOUBLE_S_PITCH_PID.ki=GIMBAL_DOUBLE_S_PITCH_I;
	GIMBAL_DOUBLE_S_PITCH_PID.kd=GIMBAL_DOUBLE_S_PITCH_D;
	GIMBAL_DOUBLE_S_PITCH_PID.Error=0;
	GIMBAL_DOUBLE_S_PITCH_PID.iError=0;	
	GIMBAL_DOUBLE_S_PITCH_PID.LastError=0;
	GIMBAL_DOUBLE_S_PITCH_PID.PrevError=0;
	GIMBAL_DOUBLE_S_PITCH_PID.OutputValue=0;
	GIMBAL_DOUBLE_S_PITCH_PID.outputValue_Int32=0;
	GIMBAL_DOUBLE_S_PITCH_PID.LastOutput=0;
	GIMBAL_DOUBLE_S_PITCH_PID.SetValue=0;
	
	//Second Yaw
	GIMBAL_DOUBLE_P_YAW_PID.kp=GIMBAL_DOUBLE_P_YAW_P;
	GIMBAL_DOUBLE_P_YAW_PID.ki=GIMBAL_DOUBLE_P_YAW_I;
	GIMBAL_DOUBLE_P_YAW_PID.kd=GIMBAL_DOUBLE_P_YAW_D;
	GIMBAL_DOUBLE_P_YAW_PID.Error=0;
	GIMBAL_DOUBLE_P_YAW_PID.iError=0;	
	GIMBAL_DOUBLE_P_YAW_PID.LastError=0; 
	GIMBAL_DOUBLE_P_YAW_PID.OutputValue=0;
	GIMBAL_DOUBLE_P_YAW_PID.outputValue_Int32=0;
	GIMBAL_DOUBLE_P_YAW_PID.LastOutput=0;
	GIMBAL_DOUBLE_P_YAW_PID.SetValue=0;
	
	GIMBAL_DOUBLE_S_YAW_PID.kp=GIMBAL_DOUBLE_S_YAW_P;
	GIMBAL_DOUBLE_S_YAW_PID.ki=GIMBAL_DOUBLE_S_YAW_I;
	GIMBAL_DOUBLE_S_YAW_PID.kd=GIMBAL_DOUBLE_S_YAW_D;
	GIMBAL_DOUBLE_S_YAW_PID.Error=0;
	GIMBAL_DOUBLE_S_YAW_PID.iError=0;
	GIMBAL_DOUBLE_S_YAW_PID.LastError=0;
	GIMBAL_DOUBLE_S_YAW_PID.PrevError=0;
	GIMBAL_DOUBLE_S_YAW_PID.OutputValue=0;
	GIMBAL_DOUBLE_S_YAW_PID.outputValue_Int32=0;
	GIMBAL_DOUBLE_S_YAW_PID.LastOutput=0;
	GIMBAL_DOUBLE_S_YAW_PID.SetValue=0;
	
	//Independent_Yaw
	GIMBAL_INDEPENDENT_P_YAW_PID.kp=GIMBAL_INDEPENDENT_P_YAW_P;
	GIMBAL_INDEPENDENT_P_YAW_PID.ki=GIMBAL_INDEPENDENT_P_YAW_I;
	GIMBAL_INDEPENDENT_P_YAW_PID.kd=GIMBAL_INDEPENDENT_P_YAW_D;
	GIMBAL_INDEPENDENT_P_YAW_PID.Error=0;
	GIMBAL_INDEPENDENT_P_YAW_PID.iError=0;	
	GIMBAL_INDEPENDENT_P_YAW_PID.LastError=0; 
	GIMBAL_INDEPENDENT_P_YAW_PID.OutputValue=0;
	GIMBAL_INDEPENDENT_P_YAW_PID.outputValue_Int32=0;
	GIMBAL_INDEPENDENT_P_YAW_PID.LastOutput=0;
	GIMBAL_INDEPENDENT_P_YAW_PID.SetValue=0;
	
	GIMBAL_INDEPENDENT_S_YAW_PID.kp=GIMBAL_INDEPENDENT_S_YAW_P;
	GIMBAL_INDEPENDENT_S_YAW_PID.ki=GIMBAL_INDEPENDENT_S_YAW_I;
	GIMBAL_INDEPENDENT_S_YAW_PID.kd=GIMBAL_INDEPENDENT_S_YAW_D;
	GIMBAL_INDEPENDENT_S_YAW_PID.Error=0;
	GIMBAL_INDEPENDENT_S_YAW_PID.iError=0;
	GIMBAL_INDEPENDENT_S_YAW_PID.LastError=0;
	GIMBAL_INDEPENDENT_S_YAW_PID.PrevError=0;
	GIMBAL_INDEPENDENT_S_YAW_PID.OutputValue=0;
	GIMBAL_INDEPENDENT_S_YAW_PID.outputValue_Int32=0;
	GIMBAL_INDEPENDENT_S_YAW_PID.LastOutput=0;
	GIMBAL_INDEPENDENT_S_YAW_PID.SetValue=0;
	
  //打符模式pid   P轴
  GIMBAL_AUTO_BUFF_P_PITCH_PID.kp=GIMBAL_AUTO_BUFF_P_PITCH_P;
	GIMBAL_AUTO_BUFF_P_PITCH_PID.ki=GIMBAL_AUTO_BUFF_P_PITCH_I;
	GIMBAL_AUTO_BUFF_P_PITCH_PID.kd=GIMBAL_AUTO_BUFF_P_PITCH_D;
	GIMBAL_AUTO_BUFF_P_PITCH_PID.Error=0;
	GIMBAL_AUTO_BUFF_P_PITCH_PID.iError=0;
	GIMBAL_AUTO_BUFF_P_PITCH_PID.LastError=0;
	GIMBAL_AUTO_BUFF_P_PITCH_PID.OutputValue=0;
	GIMBAL_AUTO_BUFF_P_PITCH_PID.outputValue_Int32=0;
	GIMBAL_AUTO_BUFF_P_PITCH_PID.LastOutput=0;
	GIMBAL_AUTO_BUFF_P_PITCH_PID.SetValue=0;
	
	GIMBAL_AUTO_BUFF_S_PITCH_PID.kp=GIMBAL_AUTO_BUFF_S_PITCH_P;
	GIMBAL_AUTO_BUFF_S_PITCH_PID.ki=GIMBAL_AUTO_BUFF_S_PITCH_I;
	GIMBAL_AUTO_BUFF_S_PITCH_PID.kd=GIMBAL_AUTO_BUFF_S_PITCH_D;
	GIMBAL_AUTO_BUFF_S_PITCH_PID.Error=0;
	GIMBAL_AUTO_BUFF_S_PITCH_PID.iError=0;	
	GIMBAL_AUTO_BUFF_S_PITCH_PID.LastError=0;
	GIMBAL_AUTO_BUFF_S_PITCH_PID.PrevError=0;
	GIMBAL_AUTO_BUFF_S_PITCH_PID.OutputValue=0;
	GIMBAL_AUTO_BUFF_S_PITCH_PID.outputValue_Int32=0;
	GIMBAL_AUTO_BUFF_S_PITCH_PID.LastOutput=0;
	GIMBAL_AUTO_BUFF_S_PITCH_PID.SetValue=0;
	
	//打符模式pid    Y轴
	GIMBAL_AUTO_BUFF_P_YAW_PID.kp=GIMBAL_AUTO_BUFF_P_YAW_P;
	GIMBAL_AUTO_BUFF_P_YAW_PID.ki=GIMBAL_AUTO_BUFF_P_YAW_I;
	GIMBAL_AUTO_BUFF_P_YAW_PID.kd=GIMBAL_AUTO_BUFF_P_YAW_D;
	GIMBAL_AUTO_BUFF_P_YAW_PID.Error=0;
	GIMBAL_AUTO_BUFF_P_YAW_PID.iError=0;	
	GIMBAL_AUTO_BUFF_P_YAW_PID.LastError=0;
	GIMBAL_AUTO_BUFF_P_YAW_PID.OutputValue=0;
	GIMBAL_AUTO_BUFF_P_YAW_PID.outputValue_Int32=0;
	GIMBAL_AUTO_BUFF_P_YAW_PID.LastOutput=0;
	GIMBAL_AUTO_BUFF_P_YAW_PID.SetValue=0;
	
	GIMBAL_AUTO_BUFF_S_YAW_PID.kp=GIMBAL_AUTO_BUFF_S_YAW_P;
	GIMBAL_AUTO_BUFF_S_YAW_PID.ki=GIMBAL_AUTO_BUFF_S_YAW_I;
	GIMBAL_AUTO_BUFF_S_YAW_PID.kd=GIMBAL_AUTO_BUFF_S_YAW_D;
	GIMBAL_AUTO_BUFF_S_YAW_PID.Error=0;
	GIMBAL_AUTO_BUFF_S_YAW_PID.iError=0;
	GIMBAL_AUTO_BUFF_S_YAW_PID.LastError=0;
	GIMBAL_AUTO_BUFF_S_YAW_PID.PrevError=0;
	GIMBAL_AUTO_BUFF_S_YAW_PID.OutputValue=0;
	GIMBAL_AUTO_BUFF_S_YAW_PID.outputValue_Int32=0;
	GIMBAL_AUTO_BUFF_S_YAW_PID.LastOutput=0;
	GIMBAL_AUTO_BUFF_S_YAW_PID.SetValue=0;
	
 if(test_short_focus)
 {
  //Auto_Pitch
  GIMBAL_AUTO_P_PITCH_PID.kp=GIMBAL_AUTO_SHORT_P_PITCH_P;
	GIMBAL_AUTO_P_PITCH_PID.ki=GIMBAL_AUTO_SHORT_P_PITCH_I;
	GIMBAL_AUTO_P_PITCH_PID.kd=GIMBAL_AUTO_SHORT_P_PITCH_D;
	GIMBAL_AUTO_P_PITCH_PID.Error=0;
	GIMBAL_AUTO_P_PITCH_PID.iError=0;
	GIMBAL_AUTO_P_PITCH_PID.LastError=0;
	GIMBAL_AUTO_P_PITCH_PID.OutputValue=0;
	GIMBAL_AUTO_P_PITCH_PID.outputValue_Int32=0;
	GIMBAL_AUTO_P_PITCH_PID.LastOutput=0;
	GIMBAL_AUTO_P_PITCH_PID.SetValue=0;
	
	GIMBAL_AUTO_S_PITCH_PID.kp=GIMBAL_AUTO_SHORT_S_PITCH_P;
	GIMBAL_AUTO_S_PITCH_PID.ki=GIMBAL_AUTO_SHORT_S_PITCH_I;
	GIMBAL_AUTO_S_PITCH_PID.kd=GIMBAL_AUTO_SHORT_S_PITCH_D;
	GIMBAL_AUTO_S_PITCH_PID.Error=0;
	GIMBAL_AUTO_S_PITCH_PID.iError=0;	
	GIMBAL_AUTO_S_PITCH_PID.LastError=0;
	GIMBAL_AUTO_S_PITCH_PID.PrevError=0;
	GIMBAL_AUTO_S_PITCH_PID.OutputValue=0;
	GIMBAL_AUTO_S_PITCH_PID.outputValue_Int32=0;
	GIMBAL_AUTO_S_PITCH_PID.LastOutput=0;
	GIMBAL_AUTO_S_PITCH_PID.SetValue=0;
	
	//Auto_Yaw
	GIMBAL_AUTO_P_YAW_PID.kp=GIMBAL_AUTO_SHORT_P_YAW_P;
	GIMBAL_AUTO_P_YAW_PID.ki=GIMBAL_AUTO_SHORT_P_YAW_I;
	GIMBAL_AUTO_P_YAW_PID.kd=GIMBAL_AUTO_SHORT_P_YAW_D;
	GIMBAL_AUTO_P_YAW_PID.Error=0;
	GIMBAL_AUTO_P_YAW_PID.iError=0;	
	GIMBAL_AUTO_P_YAW_PID.LastError=0;
	GIMBAL_AUTO_P_YAW_PID.OutputValue=0;
	GIMBAL_AUTO_P_YAW_PID.outputValue_Int32=0;
	GIMBAL_AUTO_P_YAW_PID.LastOutput=0;
	GIMBAL_AUTO_P_YAW_PID.SetValue=0;
	
	GIMBAL_AUTO_S_YAW_PID.kp=GIMBAL_AUTO_SHORT_S_YAW_P;
	GIMBAL_AUTO_S_YAW_PID.ki=GIMBAL_AUTO_SHORT_S_YAW_I;
	GIMBAL_AUTO_S_YAW_PID.kd=GIMBAL_AUTO_SHORT_S_YAW_D;
	GIMBAL_AUTO_S_YAW_PID.Error=0;
	GIMBAL_AUTO_S_YAW_PID.iError=0;
	GIMBAL_AUTO_S_YAW_PID.LastError=0;
	GIMBAL_AUTO_S_YAW_PID.PrevError=0;
	GIMBAL_AUTO_S_YAW_PID.OutputValue=0;
	GIMBAL_AUTO_S_YAW_PID.outputValue_Int32=0;
	GIMBAL_AUTO_S_YAW_PID.LastOutput=0;
	GIMBAL_AUTO_S_YAW_PID.SetValue=0;
  }
  else if(test_long_focus)
	{
  //Auto_Pitch
  GIMBAL_AUTO_P_PITCH_PID.kp=GIMBAL_AUTO_LONG_P_PITCH_P;
	GIMBAL_AUTO_P_PITCH_PID.ki=GIMBAL_AUTO_LONG_P_PITCH_I;
	GIMBAL_AUTO_P_PITCH_PID.kd=GIMBAL_AUTO_LONG_P_PITCH_D;
	GIMBAL_AUTO_P_PITCH_PID.Error=0;
	GIMBAL_AUTO_P_PITCH_PID.iError=0;
	GIMBAL_AUTO_P_PITCH_PID.LastError=0;
	GIMBAL_AUTO_P_PITCH_PID.OutputValue=0;
	GIMBAL_AUTO_P_PITCH_PID.outputValue_Int32=0;
	GIMBAL_AUTO_P_PITCH_PID.LastOutput=0;
	GIMBAL_AUTO_P_PITCH_PID.SetValue=0;
	
	GIMBAL_AUTO_S_PITCH_PID.kp=GIMBAL_AUTO_LONG_S_PITCH_P;
	GIMBAL_AUTO_S_PITCH_PID.ki=GIMBAL_AUTO_LONG_S_PITCH_I;
	GIMBAL_AUTO_S_PITCH_PID.kd=GIMBAL_AUTO_LONG_S_PITCH_D;
	GIMBAL_AUTO_S_PITCH_PID.Error=0;
	GIMBAL_AUTO_S_PITCH_PID.iError=0;	
	GIMBAL_AUTO_S_PITCH_PID.LastError=0;
	GIMBAL_AUTO_S_PITCH_PID.PrevError=0;
	GIMBAL_AUTO_S_PITCH_PID.OutputValue=0;
	GIMBAL_AUTO_S_PITCH_PID.outputValue_Int32=0;
	GIMBAL_AUTO_S_PITCH_PID.LastOutput=0;
	GIMBAL_AUTO_S_PITCH_PID.SetValue=0;
	
	//Auto_Yaw
	GIMBAL_AUTO_P_YAW_PID.kp=GIMBAL_AUTO_LONG_P_YAW_P;
	GIMBAL_AUTO_P_YAW_PID.ki=GIMBAL_AUTO_LONG_P_YAW_I;
	GIMBAL_AUTO_P_YAW_PID.kd=GIMBAL_AUTO_LONG_P_YAW_D;
	GIMBAL_AUTO_P_YAW_PID.Error=0;
	GIMBAL_AUTO_P_YAW_PID.iError=0;	
	GIMBAL_AUTO_P_YAW_PID.LastError=0;
	GIMBAL_AUTO_P_YAW_PID.OutputValue=0;
	GIMBAL_AUTO_P_YAW_PID.outputValue_Int32=0;
	GIMBAL_AUTO_P_YAW_PID.LastOutput=0;
	GIMBAL_AUTO_P_YAW_PID.SetValue=0;
	
	GIMBAL_AUTO_S_YAW_PID.kp=GIMBAL_AUTO_LONG_S_YAW_P;
	GIMBAL_AUTO_S_YAW_PID.ki=GIMBAL_AUTO_LONG_S_YAW_I;
	GIMBAL_AUTO_S_YAW_PID.kd=GIMBAL_AUTO_LONG_S_YAW_D;
	GIMBAL_AUTO_S_YAW_PID.Error=0;
	GIMBAL_AUTO_S_YAW_PID.iError=0;
	GIMBAL_AUTO_S_YAW_PID.LastError=0;
	GIMBAL_AUTO_S_YAW_PID.PrevError=0;
	GIMBAL_AUTO_S_YAW_PID.OutputValue=0;
	GIMBAL_AUTO_S_YAW_PID.outputValue_Int32=0;
	GIMBAL_AUTO_S_YAW_PID.LastOutput=0;
	GIMBAL_AUTO_S_YAW_PID.SetValue=0;
  }
	else if(test_industry)
	{
  //Auto_Pitch
  GIMBAL_AUTO_P_PITCH_PID.kp=GIMBAL_AUTO_INDUSTRY_P_PITCH_P;
	GIMBAL_AUTO_P_PITCH_PID.ki=GIMBAL_AUTO_INDUSTRY_P_PITCH_I;
	GIMBAL_AUTO_P_PITCH_PID.kd=GIMBAL_AUTO_INDUSTRY_P_PITCH_D;
	GIMBAL_AUTO_P_PITCH_PID.Error=0;
	GIMBAL_AUTO_P_PITCH_PID.iError=0;
	GIMBAL_AUTO_P_PITCH_PID.LastError=0;
	GIMBAL_AUTO_P_PITCH_PID.OutputValue=0;
	GIMBAL_AUTO_P_PITCH_PID.outputValue_Int32=0;
	GIMBAL_AUTO_P_PITCH_PID.LastOutput=0;
	GIMBAL_AUTO_P_PITCH_PID.SetValue=0;
	
	GIMBAL_AUTO_S_PITCH_PID.kp=GIMBAL_AUTO_INDUSTRY_S_PITCH_P;
	GIMBAL_AUTO_S_PITCH_PID.ki=GIMBAL_AUTO_INDUSTRY_S_PITCH_I;
	GIMBAL_AUTO_S_PITCH_PID.kd=GIMBAL_AUTO_INDUSTRY_S_PITCH_D;
	GIMBAL_AUTO_S_PITCH_PID.Error=0;
	GIMBAL_AUTO_S_PITCH_PID.iError=0;	
	GIMBAL_AUTO_S_PITCH_PID.LastError=0;
	GIMBAL_AUTO_S_PITCH_PID.PrevError=0;
	GIMBAL_AUTO_S_PITCH_PID.OutputValue=0;
	GIMBAL_AUTO_S_PITCH_PID.outputValue_Int32=0;
	GIMBAL_AUTO_S_PITCH_PID.LastOutput=0;
	GIMBAL_AUTO_S_PITCH_PID.SetValue=0;
	
	//Auto_Yaw
	GIMBAL_AUTO_P_YAW_PID.kp=GIMBAL_AUTO_INDUSTRY_P_YAW_P;
	GIMBAL_AUTO_P_YAW_PID.ki=GIMBAL_AUTO_INDUSTRY_P_YAW_I;
	GIMBAL_AUTO_P_YAW_PID.kd=GIMBAL_AUTO_INDUSTRY_P_YAW_D;
	GIMBAL_AUTO_P_YAW_PID.Error=0;
	GIMBAL_AUTO_P_YAW_PID.iError=0;	
	GIMBAL_AUTO_P_YAW_PID.LastError=0;
	GIMBAL_AUTO_P_YAW_PID.OutputValue=0;
	GIMBAL_AUTO_P_YAW_PID.outputValue_Int32=0;
	GIMBAL_AUTO_P_YAW_PID.LastOutput=0;
	GIMBAL_AUTO_P_YAW_PID.SetValue=0;
	
	GIMBAL_AUTO_S_YAW_PID.kp=GIMBAL_AUTO_INDUSTRY_S_YAW_P;
	GIMBAL_AUTO_S_YAW_PID.ki=GIMBAL_AUTO_INDUSTRY_S_YAW_I;
	GIMBAL_AUTO_S_YAW_PID.kd=GIMBAL_AUTO_INDUSTRY_S_YAW_D;
	GIMBAL_AUTO_S_YAW_PID.Error=0;
	GIMBAL_AUTO_S_YAW_PID.iError=0;
	GIMBAL_AUTO_S_YAW_PID.LastError=0;
	GIMBAL_AUTO_S_YAW_PID.PrevError=0;
	GIMBAL_AUTO_S_YAW_PID.OutputValue=0;
	GIMBAL_AUTO_S_YAW_PID.outputValue_Int32=0;
	GIMBAL_AUTO_S_YAW_PID.LastOutput=0;
	GIMBAL_AUTO_S_YAW_PID.SetValue=0;		
	}

}
